## runtime-dom

​	因为在不同的平台上创建元素等过程的api不尽相同，因此将源码分为runtime-core以及这里的runtime-dom，在这个模块内封装dom元素相关的api，以提供一个稳定的接口。



 实现流程：

1.  调用runtime-core中的createRenderer函数，将创建元素，设置属性等方法传入，通过闭包保持这些方法可用。

   ```js
   const renderer = createRenderer({ createElement, patchProp, insert,,,});
   ```

2. createRenderer函数会返回一个对象，其中会调用createAppAPI这一函数，同时将render函数传入，因此renderer相当于是一个对象

   ```js
   renderer = {
       createApp：function createApp
   }
   ```

   ```js
   //createApp.js
   export function createAppAPI(render) {   
     return function createApp(rootComponent: any) {
       return {
         mount(rootContainer: any) {
           //1.转化为vnode，后续所有操作都会基于虚拟节点做处理
           const vnode = createVNode(rootComponent);
           //2.render 实现渲染
           render(vnode, rootContainer);
         },
       };
     };
   }
   ```

3. 在main.js中调用createApp函数时，该函数为runtime-dom模块中返回的createApp，接收到一个根组件后，

   ```js
   import { App } from "./App.js";
   import { createApp } from "../../dist/mini-vue.esm.js";
   const rootContainer = document.querySelector("#app");
   createApp(App).mount(rootContainer);
   ```

        ```js
        //runtime-dom index.ts
        export function createApp(rootComponent) {
          return renderer.createApp(rootComponent);
        }
        ```





